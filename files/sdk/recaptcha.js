import{initializeAppCheck,ReCaptchaV3Provider}from"https://www.gstatic.com/firebasejs/9.17.1/firebase-app-check.js";import{publicRecaptchaKey}from"/common/apiKeys.js";export async function initAppCheck(e){const t=initializeAppCheck(e,{provider:new ReCaptchaV3Provider(publicRecaptchaKey),isTokenAutoRefreshEnabled:!0});window._captcha={firebase:{appCheck:t}}}window.googleCaptchaCallback=e=>{console.log(e)};const style=document.createElement("style");style.innerHTML="\n.grecaptcha-badge { visibility: hidden; }\n",document.head.appendChild(style);const captchaButtons=[...document.getElementsByClassName("captchaButton")];for(const e of captchaButtons){const t=document.createElement("button");t.onclick=e.onclick,t.innerText=e.innerText,t.className="g-recaptcha",t.dataset.sitekey=publicRecaptchaKey,t.dataset.callback="googleCaptchaCallback",t.dataset.action="submit",e.replaceWith(t)}if(!doesDocumentIncludeScript("https://www.google.com/recaptcha/api.js")){const c=document.createElement("script");c.src="https://www.google.com/recaptcha/api.js",document.head.appendChild(c)}function doesDocumentIncludeScript(e){const t=[...document.getElementsByTagName("script")];return Boolean(t.find((t=>t.src.endsWith(e))))}
