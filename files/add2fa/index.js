import{add}from"/js/2fa.js";import{replaceTemplates}from"/sdk/templates.js";const phoneNumberInput=document.getElementById("phoneNumber"),displayNameInput=document.getElementById("displayName"),enableButton=document.getElementById("enable2faButton"),verificationCodeInput=document.getElementById("verificationCode"),verifyButton=document.getElementById("verify2faButton");let confirm,recaptchaButton;window.doVerify2fa=async()=>{if(!confirm)throw new Error("Must enable before verifying");verifyButton.disabled=!0,await confirm(verificationCodeInput.value),confirm=null,enableButton.disabled=!1},window.doAdd2fa=async()=>{const e=phoneNumberInput.value,n=displayNameInput.value;[confirm,recaptchaButton]=await add(e,n).catch((e=>{console.log(e),window.verificationStyle="display: none;",window.addTwofaStyle="display: block;"})).finally((()=>{window.verificationStyle="display: block;",window.addTwofaStyle="display: none;",replaceTemplates()})),recaptchaButton.onStateChange((e=>{console.log(e.state)}))},window.addDisabled=!0,window.verificationStyle="display: none;",window.addTwofaStyle="display: block;";const checkIfValid=()=>""!==phoneNumberInput.value&&phoneNumberInput.value.match(/^\+?[0-9]\d{9,12}$/);phoneNumberInput.addEventListener("input",{handleEvent:()=>{window.addDisabled=!(""!==phoneNumberInput.value&&phoneNumberInput.value.match(/^\+?[0-9]\d{9,12}$/)),replaceTemplates()}}),verificationCodeInput.addEventListener("input",{handleEvent:()=>{window.verifyDisabled=""===verificationCodeInput.value||6!==verificationCodeInput.value.length,replaceTemplates()}}),replaceTemplates();
