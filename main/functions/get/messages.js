const settings=require("../../../settings.json"),isModuleInstalled=require("../isModuleInstalled").execute,fs=require("fs");let requestInfo;isModuleInstalled("requestInfo")&&(requestInfo=require(`../../../${settings.generic.path.files.modules}requestInfo/getInfo`).execute),module.exports={execute(e){let s=e?.files,t=e?.request,n=[];if(s||(s=fs.readdirSync(settings.generic.path.files.messages)),s.forEach((e=>{n.push(e.split(".json")[0])})),n.length<1)return null;let i,l=[];t&&requestInfo?l=requestInfo(t).lang||[]:t&&t.headers["accept-language"]&&(l=[{name:t.headers["accept-language"].split(",").split(";")[0].split("-")[0],quality:1}]);let a=!1;return t&&l.forEach((e=>{a||n.includes(e.name)&&(i=e.name,a=!0)})),settings.generic.lang.forEach((e=>{a||n.includes(e)&&(i=e,a=!0)})),a||(i=n[0],a=!0),{lang:i,file:`${i}.json`,mainPath:settings.generic.path.files.messages,mainFunction:()=>JSON.parse(fs.readFileSync(`${settings.generic.path.files.messages}${i}.json`))}}};
