const readdir=require("util").promisify(require("fs").readdir),settings=require("../../../settings.json"),messages=require("../get/messages").execute().mainFunction(),isModuleInstalled=require("../isModuleInstalled").execute;let cConsole=console;require("../../functions/isModuleInstalled").execute("console")&&(cConsole={clear:require(`../../.${settings.generic.path.files.modules}console/functions/clear`).execute,log:require(`../../.${settings.generic.path.files.modules}console/functions/log`).execute,warn:require(`../../.${settings.generic.path.files.modules}console/functions/warn`).execute}),module.exports={async execute(){cConsole.clear(),cConsole.log(`Listening on port ${settings.generic.port}...`);try{const e=(await readdir(settings.generic.path.files.errors)).filter((e=>e!==settings.generic.path.files.noError));if(e[0]){cConsole.clear();let s=messages.error.thereAreErrors.replace("{amount}",e.length);if(1===e.length&&(s=messages.error.thereIsError.replace("{amount}",e.length)),cConsole.warn(s),cConsole.log(),isModuleInstalled("text")){const s=[];e.forEach((e=>{if(e.endsWith(".json")){const r=require(`../../../${settings.generic.path.files.errors}${e}`).occurrences.length;s.push([`${settings.generic.path.files.errors}${e}`,r])}else s.push([`${settings.generic.path.files.errors}${e}`,-1])}));const r=require(`../../../${settings.generic.path.files.modules}text/createDiagram.js`);r.twoColumns(s,4," ").forEach((e=>{cConsole.warn(e)}))}else e.forEach((e=>{const s=require(`../../../${settings.generic.path.files.errors}${e}`).occurrences.length;cConsole.warn(`${settings.generic.path.files.errors}${e}\t\t${s}`)}));cConsole.log(),cConsole.warn(s)}}catch(e){require("./lastFallback").execute(e)}}};
