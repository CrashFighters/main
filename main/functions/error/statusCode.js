const fs=require("fs"),settings=require("../../../settings.json");let gMessages;try{gMessages=require("../get/messages").execute().mainFunction()}catch(e){gMessages=void 0}const mime=require("mime-types");module.exports={execute(e,r,t){e.writeHead(r,{"Content-Type":"text/plain"}),t||(t={});const s=t.errorFile,o=t.text;let i,a="";gMessages&&(i=gMessages.httpStatusCodes[100*(r+"").split("")[0]]),i&&i[r]&&(a=i[r]);const g=settings.generic.path.files.errorFile.replace("{files}",settings.generic.path.files.files);fs.readFile(g,(async function(t,i){if(t)throw t;let n=i,f=n.toString("utf-8").replace("|errorCode|",r).replace("|errorCodeMessage|",a).replace("|reloadText|",gMessages?gMessages.error.reload:"Reload");return n=Buffer.from(f,"utf-8"),s&&(f=n.toString("utf-8").replace("|errorFile|",s),n=Buffer.from(f,"utf-8")),o&&(f=n.toString("utf-8").replace("|errorMessage|",o),n=Buffer.from(f,"utf-8")),e.writeHead(r,{"Content-Type":mime.lookup(g)}),e.end(n)}))}};
