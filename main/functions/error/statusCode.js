const fs=require("fs"),settings=require("../../../settings.json");let gMessages;try{gMessages=require("../get/messages").execute().mainFunction()}catch(e){gMessages=void 0}const mime=require("mime-types");module.exports={execute(e,r,t){e.writeHead(r,{"Content-Type":"text/plain"}),t||(t={});let s,i=t.errorFile,o=t.text,a="";gMessages&&(s=gMessages.httpStatusCodes[100*(r+"").split("")[0]]),s&&s[r]&&(a=s[r]);let g=settings.generic.path.files.errorFile.replace("{files}",settings.generic.path.files.files);fs.readFile(g,(async function(t,s){if(t)throw t;let l=s,n=l.toString("utf-8").replace("|errorCode|",r).replace("|errorCodeMessage|",a).replace("|reloadText|",gMessages?gMessages.error.reload:"Reload");return l=Buffer.from(n,"utf-8"),i&&(n=l.toString("utf-8").replace("|errorFile|",i),l=Buffer.from(n,"utf-8")),o&&(n=l.toString("utf-8").replace("|errorMessage|",o),l=Buffer.from(n,"utf-8")),e.writeHead(r,{"Content-Type":mime.lookup(g)}),e.end(l)}))}};
